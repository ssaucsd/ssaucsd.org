---
import { Image } from "astro:assets";
import type { BoardMember } from "@/data/board";

interface Props extends BoardMember {}

const { name, position, pronouns, year, imageUrl, major, instrument, minor } = Astro.props;

// Dynamically import all board images
const boardImages = import.meta.glob<{ default: ImageMetadata }>('/src/assets/board/*.webp', { eager: true });

// Get the image for this board member
const imagePath = `/src/assets${imageUrl}`;
const imageModule = boardImages[imagePath];
const image = imageModule?.default;
---

<div class="w-full overflow-hidden border-none shadow-none bg-transparent group">
  <div class="relative aspect-4/5 w-full overflow-hidden rounded-xl bg-muted">
    {image ? (
      <Image
        src={image}
        alt={name}
        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
        width={400}
        height={500}
      />
    ) : (
      <div class="flex h-full w-full items-center justify-center text-muted-foreground">
        No Image
      </div>
    )}
    <div class="absolute inset-0 bg-linear-to-t from-black/60 via-black/0 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
  </div>
  <div class="mt-4 flex flex-col gap-1">
    <div class="flex items-baseline justify-between gap-2">
      <h3 class="text-xl font-bold leading-tight">{name}</h3>
      {pronouns && (
        <span class="text-xs text-muted-foreground shrink-0">
          {pronouns}
        </span>
      )}
    </div>
    <p class="text-sm font-medium text-primary">{position}</p>

    <div class="mt-2 flex flex-col gap-0.5 text-sm text-muted-foreground">
      <p>
        <span class="font-medium text-foreground">Year:</span> {year}
      </p>
      <p>
        <span class="font-medium text-foreground">Major:</span> {major}
      </p>
      {minor && (
        <p>
          <span class="font-medium text-foreground">Minor:</span> {minor}
        </p>
      )}
      <p>
        <span class="font-medium text-foreground">Instrument:</span> {instrument}
      </p>
    </div>
  </div>
</div>
